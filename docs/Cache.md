# Cache

为了尽可能的节省cpu，需要做一部分的数据缓存

数据缓存分为持久化缓存（Memory），运行时缓存（runtime）和单帧缓存（tick）

## 持久化缓存 - Memory

持久化缓存用于存储`长期不会改变的数据`或者是`容易被清理但会被反复使用的数据`。

持久化缓存的数据可以用来恢复运行时缓存对象，以便更好地组织游戏逻辑。

例如`长期的统计数据`，`任务分配名单`

## 运行时缓存 - runtime

运行时缓存会在global被清空/还原时被一同删除，即所有挂载在global对象上的非原生对象/属性/方法等。

因为运行时缓存是以对象的形式存在的，所以能够方便的管理游戏过程。

但是因为容易丢失的问题，一般需要一个能够用来恢复的持久化缓存（Memory）备份。

## 单帧缓存 - tick

单帧缓存是运行时缓存的一种，但是其缓存的有效期只在同一tick内，之后就会失效。

游戏中包含时时刻刻都在变化的数据，这些数据可能马上就会失效，但在同一个tick内会被用到多次。

将这些同时被用到多次的数据缓存一下能够有效提升代码运行效率。

需要注意的是，这项缓存措施仅仅在数据被足够多的调用时，才会有明显的效果。

如：每个房间的energy，单一数据，每tick都可能不同又会被多次使用。

单帧缓存使用单帧缓存管理器（TickCacheManager）进行管理。

